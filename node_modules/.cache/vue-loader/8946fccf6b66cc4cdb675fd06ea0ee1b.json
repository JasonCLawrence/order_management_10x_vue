{"remainingRequest":"/home/jlawrence/10x/apps/OmsVue/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jlawrence/10x/apps/OmsVue/src/views/Orders/Attachments.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jlawrence/10x/apps/OmsVue/src/views/Orders/Attachments.vue","mtime":1585672524045},{"path":"/home/jlawrence/10x/apps/OmsVue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/jlawrence/10x/apps/OmsVue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jlawrence/10x/apps/OmsVue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport api from '@/api/order'\nimport moment from 'moment'\nimport LightBox from 'vue-image-lightbox'\n\nexport default {\n    name: 'attachments',\n    components: {\n        LightBox,\n    },\n    props: {\n        order: {\n            type: Object,\n            default() {\n                return {\n                    attachments: [\n                        {\n                            url: '',\n                        },\n                    ],\n                }\n            },\n        },\n    },\n    data() {\n        return {\n            images: [],\n            submitting: false,\n        }\n    },\n    methods: {\n        deleteAttachment(id) {\n            this.$swal\n                .fire({\n                    title: 'Delete Attachment?',\n                    text: `Are you sure you want to delete this attachment?`,\n                    type: 'warning',\n                    showCancelButton: true,\n                    confirmButtonColor: '#3085d6',\n                    cancelButtonColor: '#d33',\n                })\n                .then(result => {\n                    if (!result.value) return\n\n                    this.submitting = true\n                    api.deleteAttachment(this.order.id, id)\n                        .then(res => {\n                            this.$swal({\n                                title: 'Attachment Deleted!',\n                                type: 'success',\n                            })\n\n                            let index = this.order.attachments.findIndex(\n                                x => x.id == id\n                            )\n                            this.order.attachments.splice(index, 1)\n\n                            this.recaclImages()\n                        })\n                        .catch(error => {\n                            this.$swal({\n                                title: 'Error Deleting Attachment!',\n                                type: 'error',\n                            })\n                        })\n                        .finally(() => {\n                            this.submitting = false\n                        })\n                })\n        },\n        displayTime(time) {\n            return moment(time, 'YYYY-MM-DD HH:mm:ss').format(\n                'dddd, MMMM Do YYYY, h:mm:ss a'\n            )\n        },\n\n        openGallery(index) {\n            this.$refs.lightbox.showImage(index)\n        },\n        recaclImages() {\n            if (this.order) {\n                this.images = []\n                // console.log(this.order.attachments)\n                for (let a of this.order.attachments) {\n                    this.images.push({\n                        thumb: a.url,\n                        src: a.url,\n                        caption: '',\n                    })\n                }\n            }\n        },\n    },\n    mounted() {\n        // api.fetchNotes(this.$route.params.id).then(result => {\n        //     this.notes = result.data.success.data\n        // })\n        // convert images to format lightbox uses\n    },\n    watch: {\n        order() {\n            // console.log(this.order)\n            // console.log(this.order.attachments)\n            this.recaclImages()\n        },\n    },\n}\n",{"version":3,"sources":["Attachments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Attachments.vue","sourceRoot":"src/views/Orders","sourcesContent":["<template>\n    <div>\n        <h6 class=\"heading-small text-muted mb-4\">Attachments</h6>\n        <template v-if=\"order && order.attachments && order.attachments.length != 0\">\n            <LightBox :images=\"images\" ref=\"lightbox\" :show-caption=\"true\" :show-light-box=\"false\"></LightBox>\n            <div class=\"row\">\n                <div\n                    class=\"col-lg-4 text-right\"\n                    v-for=\"(item, index) in order.attachments\"\n                    :key=\"index\"\n                >\n                    <img\n                        :src=\"item.url\"\n                        @click=\"openGallery(index)\"\n                        style=\"width:100%; cursor:pointer;\"\n                    />\n                    <base-button\n                        style=\"margin-top:1em;\"\n                        size=\"sm\"\n                        type=\"primary\"\n                        @click=\"deleteAttachment(item.id)\"\n                        :disabled=\"submitting?true:false\"\n                    >{{ \"Delete Attachment\" }}</base-button>\n                </div>\n                <!-- <div class=\"col-md-12 text-right\">\n                \n                </div>-->\n            </div>\n        </template>\n        <div v-else style=\"padding:5em 0; text-align:center;\">No Attachments Submitted</div>\n    </div>\n</template>\n\n<script>\nimport api from '@/api/order'\nimport moment from 'moment'\nimport LightBox from 'vue-image-lightbox'\n\nexport default {\n    name: 'attachments',\n    components: {\n        LightBox,\n    },\n    props: {\n        order: {\n            type: Object,\n            default() {\n                return {\n                    attachments: [\n                        {\n                            url: '',\n                        },\n                    ],\n                }\n            },\n        },\n    },\n    data() {\n        return {\n            images: [],\n            submitting: false,\n        }\n    },\n    methods: {\n        deleteAttachment(id) {\n            this.$swal\n                .fire({\n                    title: 'Delete Attachment?',\n                    text: `Are you sure you want to delete this attachment?`,\n                    type: 'warning',\n                    showCancelButton: true,\n                    confirmButtonColor: '#3085d6',\n                    cancelButtonColor: '#d33',\n                })\n                .then(result => {\n                    if (!result.value) return\n\n                    this.submitting = true\n                    api.deleteAttachment(this.order.id, id)\n                        .then(res => {\n                            this.$swal({\n                                title: 'Attachment Deleted!',\n                                type: 'success',\n                            })\n\n                            let index = this.order.attachments.findIndex(\n                                x => x.id == id\n                            )\n                            this.order.attachments.splice(index, 1)\n\n                            this.recaclImages()\n                        })\n                        .catch(error => {\n                            this.$swal({\n                                title: 'Error Deleting Attachment!',\n                                type: 'error',\n                            })\n                        })\n                        .finally(() => {\n                            this.submitting = false\n                        })\n                })\n        },\n        displayTime(time) {\n            return moment(time, 'YYYY-MM-DD HH:mm:ss').format(\n                'dddd, MMMM Do YYYY, h:mm:ss a'\n            )\n        },\n\n        openGallery(index) {\n            this.$refs.lightbox.showImage(index)\n        },\n        recaclImages() {\n            if (this.order) {\n                this.images = []\n                // console.log(this.order.attachments)\n                for (let a of this.order.attachments) {\n                    this.images.push({\n                        thumb: a.url,\n                        src: a.url,\n                        caption: '',\n                    })\n                }\n            }\n        },\n    },\n    mounted() {\n        // api.fetchNotes(this.$route.params.id).then(result => {\n        //     this.notes = result.data.success.data\n        // })\n        // convert images to format lightbox uses\n    },\n    watch: {\n        order() {\n            // console.log(this.order)\n            // console.log(this.order.attachments)\n            this.recaclImages()\n        },\n    },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n</style>"]}]}