{"remainingRequest":"/home/jlawrence/10x/apps/OmsVue/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jlawrence/10x/apps/OmsVue/src/views/Fleet/ViewVehicle.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jlawrence/10x/apps/OmsVue/src/views/Fleet/ViewVehicle.vue","mtime":1585672524041},{"path":"/home/jlawrence/10x/apps/OmsVue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jlawrence/10x/apps/OmsVue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/jlawrence/10x/apps/OmsVue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jlawrence/10x/apps/OmsVue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport api from '@/api/fleet'\n\nexport default {\n    name: 'view-vehicle',\n    data() {\n        return {\n            model: {\n                id: 0,\n                name: '',\n                location: '',\n                lat: '',\n                lon: '',\n                driver: 0,\n                warehouse: 0,\n            },\n            updating: false,\n            drivers: [],\n            warehouses: [],\n        }\n    },\n    methods: {\n        update() {\n            this.updating = true\n            this.$validator.validate().then(valid => {\n                if (valid) {\n                    api.update(this.model.id, this.model)\n                        .then(() => {\n                            this.$swal({\n                                title: 'Vehicle Updated',\n                                type: 'success',\n                            })\n                        })\n                        .catch(error => {\n                            this.$swal({\n                                title: error.response.data.error.message,\n                                type: 'error',\n                            })\n                        })\n                        .finally(() => {\n                            this.updating = false\n                        })\n                } else {\n                    this.updating = false\n                }\n            })\n        },\n    },\n    mounted() {\n        api.fetchById(this.$route.params.id).then(result => {\n            let model = result.data.success.data\n\n            this.model = model\n        })\n\n        api.fetchDrivers().then(result => {\n            let drivers = result.data.success.data.data\n\n            drivers = drivers.filter(x => {\n                let res =\n                    x.roles.findIndex(r => {\n                        return r.role.name == 'driver'\n                    }) !== -1\n                return res\n            })\n            console.log(drivers)\n            this.drivers = drivers\n        })\n\n        api.fetchWarehouses().then(result => {\n            let warehouses = result.data.success.data.data\n            this.warehouses = warehouses\n        })\n    },\n}\n",{"version":3,"sources":["ViewVehicle.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0HA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"ViewVehicle.vue","sourceRoot":"src/views/Fleet","sourcesContent":["<template>\n    <div>\n        <base-header class=\"header pb-8 pt-5 pt-lg-5 d-flex\" />\n\n        <div class=\"container-fluid mt--7 pb-4\">\n            <div class=\"row\">\n                <div class=\"col-xl-8 order-xl-1\">\n                    <card shadow type=\"secondary\">\n                        <div slot=\"header\" class=\"bg-white border-0\">\n                            <div class=\"row align-items-center\">\n                                <div class=\"col-8\">\n                                    <h3 class=\"mb-0\">Vehicle</h3>\n                                </div>\n                                <div class=\"col-4 text-right\"></div>\n                            </div>\n                        </div>\n                        <template>\n                            <div class=\"pl-lg-4\">\n                                <form @submit.prevent=\"update()\">\n                                    <div class=\"row\">\n                                        <div class=\"col-lg-12\">\n                                            <base-input\n                                                alternative\n                                                label=\"Name\"\n                                                placeholder=\"Luxury Car\"\n                                                v-model=\"model.name\"\n                                                name=\"name\"\n                                                :error=\"errors.first('name')\"\n                                            />\n                                        </div>\n                                        <div class=\"col-lg-12\">\n                                            <div class=\"form-group\">\n                                                <label class=\"form-control-label\">Driver</label>\n                                                <div class=\"has-label\">\n                                                    <select\n                                                        id=\"driver\"\n                                                        name=\"driver\"\n                                                        class=\"form-control\"\n                                                        v-model=\"model.driver\"\n                                                    >\n                                                        <option :value=\"0\">None</option>\n                                                        <option\n                                                            v-for=\"(driver, key) in drivers\"\n                                                            :value=\"driver.id\"\n                                                            :key=\"key\"\n                                                        >{{driver.first_name}} {{driver.last_name}}</option>\n                                                    </select>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div class=\"col-lg-12\">\n                                            <base-input\n                                                alternative\n                                                label=\"Registration\"\n                                                placeholder=\"2312...\"\n                                                v-model=\"model.registration\"\n                                                name=\"registration\"\n                                                :error=\"errors.first('registration')\"\n                                            />\n                                        </div>\n                                        <div class=\"col-lg-12\">\n                                            <base-input\n                                                alternative\n                                                label=\"Model\"\n                                                placeholder=\"2312...\"\n                                                v-model=\"model.model\"\n                                                name=\"model\"\n                                                :error=\"errors.first('model')\"\n                                            />\n                                        </div>\n\n                                        <div class=\"col-lg-12\">\n                                            <div class=\"form-group\">\n                                                <label class=\"form-control-label\">Description</label>\n                                                <div class=\"has-label\">\n                                                    <textarea\n                                                        class=\"form-control\"\n                                                        v-model=\"model.description\"\n                                                        rows=\"3\"\n                                                        placeholder=\"Small description of vehicle...\"\n                                                        name=\"description\"\n                                                        :error=\"errors.first('description')\"\n                                                    ></textarea>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div class=\"col-lg-12\">\n                                            <div class=\"form-group\">\n                                                <label class=\"form-control-label\">Color</label>\n                                                <div class=\"has-label\">\n                                                    <input\n                                                        type=\"color\"\n                                                        v-model=\"model.color\"\n                                                        valid=\"true\"\n                                                        class=\"form-control\"\n                                                        name=\"color\"\n                                                        :error=\"errors.first('color')\"\n                                                    />\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    <div class=\"row\">\n                                        <div class=\"col-md-12\">\n                                            <base-button\n                                                @click=\"update()\"\n                                                class=\"float-right\"\n                                                :disabled=\"updating?true:false\"\n                                            >{{ updating?\"Saving Changes...\":\"Save Changes\" }}</base-button>\n                                        </div>\n                                    </div>\n                                </form>\n                            </div>\n                        </template>\n                    </card>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\nimport api from '@/api/fleet'\n\nexport default {\n    name: 'view-vehicle',\n    data() {\n        return {\n            model: {\n                id: 0,\n                name: '',\n                location: '',\n                lat: '',\n                lon: '',\n                driver: 0,\n                warehouse: 0,\n            },\n            updating: false,\n            drivers: [],\n            warehouses: [],\n        }\n    },\n    methods: {\n        update() {\n            this.updating = true\n            this.$validator.validate().then(valid => {\n                if (valid) {\n                    api.update(this.model.id, this.model)\n                        .then(() => {\n                            this.$swal({\n                                title: 'Vehicle Updated',\n                                type: 'success',\n                            })\n                        })\n                        .catch(error => {\n                            this.$swal({\n                                title: error.response.data.error.message,\n                                type: 'error',\n                            })\n                        })\n                        .finally(() => {\n                            this.updating = false\n                        })\n                } else {\n                    this.updating = false\n                }\n            })\n        },\n    },\n    mounted() {\n        api.fetchById(this.$route.params.id).then(result => {\n            let model = result.data.success.data\n\n            this.model = model\n        })\n\n        api.fetchDrivers().then(result => {\n            let drivers = result.data.success.data.data\n\n            drivers = drivers.filter(x => {\n                let res =\n                    x.roles.findIndex(r => {\n                        return r.role.name == 'driver'\n                    }) !== -1\n                return res\n            })\n            console.log(drivers)\n            this.drivers = drivers\n        })\n\n        api.fetchWarehouses().then(result => {\n            let warehouses = result.data.success.data.data\n            this.warehouses = warehouses\n        })\n    },\n}\n</script>\n<style></style>\n"]}]}